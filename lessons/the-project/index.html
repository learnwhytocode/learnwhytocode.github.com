
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>The Project - Learn Why to Code</title>
  <meta name="author" content="Dan Nguyen">

  
  <meta name="description" content="&laquo; Previous: Installing Ruby Next: How to write an address &raquo; The Project The problem: How to gather and analyze U.S. Congressmembers &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://learnwhytocode.github.com/lessons/the-project/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Learn Why to Code" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-34780757-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body  class="no-sidebar">
  <header role="banner"><hgroup>
  <h1><a href="/">Learn Why to Code</a></h1>
  
    <h2>A brief introduction to practical programming</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:learnwhytocode.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
	<li><a href="/">Home</a></li>
  	<li><a href="/toc">Table of Contents</a></li>
	<li><a href="http://ona2012.sched.org/event/4e894c10b238f8e99210261d941f6576">ONA Class</a></li>

	<li><a href="http://ruby.bastardsbook.com">Bastards Book of Ruby</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
	
	<article id="alert-box">
		<p>
		<strong>Note:</strong> This guide is intended for the <a href="http://ona2012.sched.org/event/4e894c10b238f8e99210261d941f6576" title="ONA12: Introduction to Practical Programming">9/20/2012 ONA practical programming class</a> and is a work in progress. Feel free to add comments or <a href="https://github.com/learnwhytocode/learnwhytocode.github.com/tree/source">visit the Github repo</a>. Follow me at <a href="https://www.twitter.com/dancow">@dancow for updates</a>.
			
		</p>
	</article>	
	
	
      <div>
<article class="hentry" role="article">
	<p class="meta">
      
        <a class="basic-alignment left pagin" href="/lessons/installing-ruby/" title="Previous Post: Installing Ruby">&laquo; Previous: Installing Ruby</a>
      
      
        <a class="basic-alignment right pagin" href="/lessons/how-to-write-an-address/" title="Next Post: How to write an address">Next: How to write an address &raquo;</a>
      
    </p>
	
	
	
	
  
  <header>
    
      <h1 class="entry-title">The Project</h1>
    

    
		<div class="lesson-matter">
			<div class="q"><strong>The problem:</strong> How to gather and analyze U.S. Congressmembers tweets</div>
			<div class="q"><strong>The solution:</strong> Use programming to avoid tedious, mind-numbing data-entry</div>	
		</div>
    


    
      <p class="meta">
        








  


<time datetime="2012-09-12T00:30:00-04:00" pubdate data-updated="true">Sep 12<span>th</span>, 2012</time>
        
      </p>
    
  </header>





<div class="entry-content lesson">
	
	<p class="alert-note"><em>This is just a skeleton of the actual lesson. Content is added as it is edited and polished.</em></p>
	
	<h2>Tweet stories</h2>

<p>It&#8217;s election season and just about everyone in the information business has at least a psasing interest in what politicians are saying. And in 2012, members of Congress (or their staff) are getting comfortable (a <a href="http://slatest.slate.com/posts/2011/06/06/anthony_weiner_photos_andrew_breitbart_publishes_photo_he_says_i_0.html">little too comfortable, sometimes</a>) with using Twitter as a podium.</p>

<p>Maybe you&#8217;re a political reporter and you want to be the first to report a gaffe. If you&#8217;re a social media expert, maybe you want to analyze social media usage by government. If you&#8217;re a policy wonk, then you realize that Twitter provides a nicely structured stream of links to a politician&#8217;s public statements, appearances, and interests.</p>

<p>Don&#8217;t care about tweets? Then use the same patterns and techniques but with Federal Election Commission spending data or whatever you think is worth investigating. Don&#8217;t want to publish a whiz-bang web visualization? Then publish your findings in a book.</p>

<p>All of these goals and aspirations have a common hurdle: the time sunk into the mind-numbing work of collecting and organizing data.</p>

<p>The goal of this tutorial is to show how programming can vastly reduce the least interesting parts of data work so that you can focus on what you actually want to do.</p>

<h2>Technical details</h2>

<p>This tutorial involves the mashing together of Twitter data with Congressional data <a href="http://services.sunlightlabs.com/">gathered by the Sunlight Foundation</a>. We&#8217;ll use programming to collect, analyze, and publish it.</p>

<h3>The data format</h3>

<p>Instead of using the Twitter API, I&#8217;ve prepared a small set of sample data to practice on. The data format will be the same (JSON), but the actual pattern of URLs will be different (though vaguely similar) to what you would use when fetching tweets from Twitter&#8217;s service.</p>

<p>The two kinds of files are:</p>

<h4>Account info</h4>

<p>This is the data corresponding to a user&#8217;s profile and statistics. See <a href="https://dev.twitter.com/docs/api/1/get/users/show">Twitter API doc</a></p>

<ul>
<li>Format: /users/<em>SCREENNAME</em>/show.json</li>
<li>Example: <a href="http://nottwitter.danwin.com/users/senatorboxer/show.json">http://nottwitter.danwin.com/users/senatorboxer/show.json</a></li>
<li>Equivalent <a href="https://dev.twitter.com/docs/api/1/get/users/show">Twitter 1.0 API</a> call:
<a href="https://api.twitter.com/1/users/show.json?screen_name=senatorboxer">https://api.twitter.com/1/users/show.json?screen_name=senatorboxer</a></li>
</ul>


<h4>Tweet pages</h4>

<p>Each user has a set of pages, with a max number of tweets per page (and no more than 3,200 total). See <a href="https://dev.twitter.com/docs/api/1/get/statuses/user_timeline">Twitter API doc</a></p>

<ul>
<li>Format: /statuses/<em>SCREENNAME</em>/<em>PAGE_NUM</em>/user_timeline.json</li>
<li>Example: <a href="http://nottwitter.danwin.com/statuses/senatorboxer/1/user_timeline.json">http://nottwitter.danwin.com/statuses/senatorboxer/1/user_timeline.json</a></li>
<li>Equivalent <a href="https://dev.twitter.com/docs/api/1/get/statuses/user_timeline">Twitter 1.0 API</a> call: <a href="https://api.twitter.com/1/statuses/user_timeline.json?screen_name=senatorboxer">https://api.twitter.com/1/statuses/user_timeline.json?screen_name=senatorboxer</a></li>
</ul>


<h3>The dataset scope</h3>

<p>We begin by accessing Twitter data for <strong>10 users</strong> listed in this text file:</p>

<p><a href="http://nottwitter.danwin.com/simple-congress-list.txt">http://nottwitter.danwin.com/simple-congress-list.txt</a></p>

<p>After we&#8217;ve gone through the ropes of basic programming routines, we move on to the full list of Congressmembers and their Twitter accounts. I used <a href="http://nottwitter.danwin.com/sunlight-foundation-congress-master.csv">this list</a> that was <a href="http://services.sunlightlabs.com/">compiled by the Sunlight Foundation</a>.</p>

<p>For your convenience, I&#8217;ve created bulk data that can be downloaded and unzipped to your hard drive. Your scripts have to be adapted then to point from the remote <code>http://nottwitter.danwin.com/</code> domain to <code>/yourcomputer/working-directory/</code></p>

<ul>
<li><a href="TK">Large datasetTK</a> (600+ MB unzipped)</li>
<li><a href="TK">Lite datasetTK</a> (80+ MB unzipped)</li>
</ul>


<p>The main difference is that the lite version has far fewer tweets per user. When testing scripts, you may find it easier to do a run through the lite version of the data to save time.</p>

<p>Both sets contain flaws that came from the data-collection process. For example, some Congressmembers have changed their Twitter names from what the Sunlight Foundation list last recorded. And in some cases, my data-collection script failed to successfully get data from Twitter&#8217;s API.</p>

<p>I may fix these errors in the future or just leave them in there as an exercise for the user. But keep in mind that this is not meant to be an up-to-date newsworthy dataset.</p>

<h2>Test your system</h2>

<p>Just in case you skipped the two previous installation and setup chapters, make sure you can run the following script:</p>

<figure class='code'><figcaption><span> (test-script.rb)</span> <a href='/downloads/code/test-script.rb'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
</pre></td><td class='code'><pre><code class='rb'><span class='line'><span class="nb">require</span> <span class="s1">&#39;rubygems&#39;</span>
</span><span class='line'><span class="nb">require</span> <span class="s1">&#39;json&#39;</span>
</span><span class='line'><span class="nb">require</span> <span class="s1">&#39;httparty&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="no">RUBY_VERSION</span> <span class="o">&gt;</span> <span class="s2">&quot;1.9&quot;</span>
</span><span class='line'>  <span class="nb">require</span> <span class="s1">&#39;csv&#39;</span>
</span><span class='line'><span class="k">else</span>
</span><span class='line'>  <span class="nb">require</span> <span class="s1">&#39;fastercsv&#39;</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="nb">puts</span> <span class="s2">&quot;Hello world&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="n">sunlight_list_url</span> <span class="o">=</span> <span class="s2">&quot;http://so.danwin.com/onacode/sunlight-foundation-congress-10.txt&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="nb">puts</span> <span class="s2">&quot;Testing HTTParty...fetching </span><span class="si">#{</span><span class="n">sunlight_list_url</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'><span class="nb">puts</span> <span class="s2">&quot;(you need to be online for this)&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="n">response</span> <span class="o">=</span> <span class="no">HTTParty</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sunlight_list_url</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="nb">puts</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="si">#{</span><span class="n">response</span><span class="o">.</span><span class="n">length</span><span class="si">}</span><span class="s2"> bytes downloaded from </span><span class="si">#{</span><span class="n">sunlight_list_url</span><span class="si">}</span><span class="s2">.&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="nb">puts</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">Testing the (Faster)CSV library&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="no">RUBY_VERSION</span> <span class="o">&gt;</span> <span class="s2">&quot;1.9&quot;</span>
</span><span class='line'>  <span class="n">csv</span> <span class="o">=</span> <span class="no">CSV</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="ss">:col_sep</span><span class="o">=&gt;</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span> <span class="ss">:headers</span><span class="o">=&gt;</span><span class="kp">true</span><span class="p">)</span>
</span><span class='line'><span class="k">else</span>
</span><span class='line'>  <span class="n">csv</span> <span class="o">=</span> <span class="no">FasterCSV</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="ss">:col_sep</span><span class="o">=&gt;</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span> <span class="ss">:headers</span><span class="o">=&gt;</span><span class="kp">true</span><span class="p">)</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="n">str</span> <span class="o">=</span> <span class="n">csv</span><span class="o">[</span><span class="mi">2</span><span class="o">][</span><span class="s1">&#39;firstname&#39;</span><span class="o">]</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">csv</span><span class="o">[</span><span class="mi">2</span><span class="o">][</span><span class="s1">&#39;lastname&#39;</span><span class="o">]</span>
</span><span class='line'><span class="nb">puts</span> <span class="s2">&quot;The name in the second row is: &quot;</span> <span class="o">+</span> <span class="n">str</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="nb">puts</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> * Script is done. Success&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Did it work? Good.</p>

<p>Now go into your system&#8217;s <strong>terminal</strong> and start up <strong>irb</strong>. Copy and paste the contents of the above script and see if it executes without problems.</p>

<p>If no errors come up, great, move on to the next chapter. If not, please contact me at <a href="mailto:&amp;#x64;&amp;#x61;&amp;#x6E;&amp;#x40;&amp;#x64;&amp;#x61;&amp;#x6E;&amp;#x77;&amp;#x69;&amp;#x6E;&amp;#x2E;&amp;#x63;&amp;#x6F;&amp;#x6D;">dan@danwin.com</a> or on Twitter via <a href="http://www.twitter.com/dancow">@dancow</a></p>
</div>


  <footer>
	
	<p class="meta">
      
        <a class="basic-alignment left pagin" href="/lessons/installing-ruby/" title="Previous Post: Installing Ruby">&laquo; Previous: Installing Ruby</a>
      
      
        <a class="basic-alignment right pagin" href="/lessons/how-to-write-an-address/" title="Next Post: How to write an address">Next: How to write an address &raquo;</a>
      
    </p>


    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Dan Nguyen</span></span>

      








  


<time datetime="2012-09-12T00:30:00-04:00" pubdate data-updated="true">Sep 12<span>th</span>, 2012</time>
      


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://learnwhytocode.github.com/lessons/the-project/" data-via="" data-counturl="http://learnwhytocode.github.com/lessons/the-project/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
</div>

    
    
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>


    </div>
  </div>
  <footer role="contentinfo"><div class="clearfix">
		<ul>
		   	<li><a href="/">Home</a></li>
		   	<li><a href="/toc">Contents</a></li>
			<li><a href="https://github.com/learnwhytocode/learnwhytocode.github.com/tree/source">Github Repo</li>
		  </ul>
		
		
	   
	
</div>


<div class="clearfix">
	<p>Dan Nguyen lives in Manhattan. He is a developer at <a href="http://www.propublica.org">ProPublica</a> and the incoming Head of Data at <a href="http://skift.com">Skift</a>.</p>
	
	<ul>
		<li><a href="http://danwin.com">Blog</a></li>
	   	<li><a href="http://twitter.com/dancow">Twitter</a> </li>
	<li><a href="https://plus.google.com/106012495399367722593">Google+</li>
	</ul>
</div>

<div style="margin-top: 1.5em;">
	<a rel="license" href="http://creativecommons.org/licenses/by-nc/3.0/us/"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-nc/3.0/us/88x31.png" /></a>
	
	
  &nbsp; Copyright &copy; 2012 - <a href="http://danwin.com">Dan Nguyen</a> -


  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>

</div>



</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'thebastardsbook';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://learnwhytocode.github.com/lessons/the-project/';
        var disqus_url = 'http://learnwhytocode.github.com/lessons/the-project/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
